{% extends 'generic/object.html' %}
{% load buttons %}
{% load helpers %}

{% block breadcrumbs %}
  <li class="breadcrumb-item">
    <a href="{% url 'ipam:prefix_list' %}">Prefixes</a>
  </li>
  {% if object.vrf %}
  <li class="breadcrumb-item">
    <a href="{% url 'ipam:vrf' pk=object.vrf.pk %}">{{ object.vrf }}</a>
  </li>
  {% endif %}
  <li class="breadcrumb-item">
    {{ object }}
  </li>
{% endblock %}

{% block extra_controls %}
{% if perms.ipam.add_ipaddress and active_tab == 'ip-addresses' and first_available_ip %}
  <a href="{% url 'ipam:ipaddress_add' %}?address={{ first_available_ip }}&vrf={{ object.vrf.pk }}&tenant_group={{ object.tenant.group.pk }}&tenant={{ object.tenant.pk }}" class="btn btn-sm btn-outline-success m-1">
      <i class="mdi mdi-plus-thick" aria-hidden="true"></i>
      Add an IP Address
  </a>
{% endif %}
{% endblock %}

{% block tab_items %}
<li role="presentation" class="nav-item">
    <a class="nav-link{% if not active_tab %} active{% endif %}" href="{% url 'ipam:prefix' pk=object.pk %}">
        Prefix
    </a>
</li>
<li role="presentation" class="nav-item">
    <a class="nav-link{% if active_tab %} active{% endif %}" href="{% url 'ipam:prefix_prefixes' pk=object.pk %}">
        Child Prefixes <span class="badge bg-primary">{{ object.get_child_prefixes.count }}</span>
    </a>
</li>
{% if perms.ipam.view_ipaddress and object.status != 'container' %}
<li role="presentation" class="nav-item">
    <a class="nav-link{% if active_tab %} active{% endif %}" href="{% url 'ipam:prefix_ipaddresses' pk=object.pk %}">
        IP Addresses <span class="badge bg-primary">{{ object.get_child_ips.count }}</span>
    </a>
</li>
{% endif %}

{% endblock %}
